<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>我的课程<</title>
</head>
<body>
    <p>学生展示自己学习的课程，老师展示自己创建的课程</p>
</body>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    function checkIsTeacher(){
        $.ajax({
            url: 'http://localhost:8080/ExamDemo_war_exploded/user/userAndCourseServlet',
            type:'POST',
            dataType:'json',
            contentType: 'application/json',
            beforeSend: function(request) {
                request.setRequestHeader("Authorization", localStorage.getItem("token"));
            },
            data: JSON.stringify({
                "method": "checkTeacher"
            }),
            success:function(response){
                if(response.message === "success"){
                    if(response.details === "is"){
                        var newA = $("<a href='http://localhost:8080/ExamDemo_war_exploded/course/addCourse.html' class='teacher'>添加课程</a>");
                        $("body").append(newA);
                    }
                }
            }
        });
    }
    $(document).ready(function(){
        var newHr = $("<hr>");
        var newBr = $("<br>");
        $.ajax({
            url: 'http://localhost:8080/ExamDemo_war_exploded/user/userAndCourseServlet',
            type:'POST',
            dataType:'json',
            contentType: 'application/json',
            beforeSend: function(request) {
                request.setRequestHeader("Authorization", localStorage.getItem("token"));
            },
            data: JSON.stringify({
                "method": "showMyCourse"
            }),
            success:function(response){
                if(response.message === "success"){
                    $.each(response.details, function(index, item){
                        var newCourse = $("<a href='http://localhost:8080/ExamDemo_war_exploded/course/courseDetail.html?courseId=" + item.courseId + "'>" + item.courseName + "</a>");
                        var newTeacher = $("<a href='http://localhost:8080/ExamDemo_war_exploded/user/createCourse.html >" + 添加课程 + "</a>");
                        var newStartTime = $("<p>开始日期：" + item.startDate + "</p>");
                        var newEndTime = $("<p>结束日期：" + item.endDate + "</p>");
                        $("body").append(newHr, newCourse, newBr, newTeacher, newStartTime, newEndTime);
                    });
                }
            }
        });
        checkIsTeacher();
    });
</script>
</html>